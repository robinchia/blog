---
layout: post
title: "使用Java正则表达式匹配、替换HTML内容"
categories: 正则
tags: 
 - 正则
--- 

# 使用Java正则表达式匹配、替换HTML内容

[51CTO首页](http://www.51cto.com/) | [新闻](http://news.51cto.com/) | [专题](http://www.51cto.com/col/35) | [论坛](http://bbs.51cto.com/) | [博客](http://blog.51cto.com/) | [技术圈](http://g.51cto.com/) | [读书](http://book.51cto.com/) | [技术频道](http://www.51cto.com/col/35/)| [CIO](http://www.cioage.com/)| [存储](http://www.watchstor.com/)| [地图](http://www.51cto.com/about/map.htm) | [English](http://www.51cto.com/about/aboutus_e.html)

* [组网建网](http://network.51cto.com/)
* [网络安全](http://netsecurity.51cto.com/)
* [服务器](http://server.51cto.com/)
* [操作系统](http://os.51cto.com/)
* [虚拟化](http://virtual.51cto.com/)
* [开发](http://developer.51cto.com/)
* [资讯前沿](http://www.cioage.com/news)
* [业界观察](http://www.cioage.com/insight)
* [应用体验](http://www.cioage.com/exp)
* [杀手技术](http://www.cioage.com/tech)

* [新闻资讯](http://news.watchstor.com/)
* [技术中心](http://tech.watchstor.com/)
* [互动视频](http://video.watchstor.com/)
* [专题汇聚](http://special.watchstor.com/)
*
*
*
*

![]()

[首页](http://developer.51cto.com/) | [Java](http://developer.51cto.com/java/) | [.Net](http://developer.51cto.com/.net/) | [Web](http://developer.51cto.com/web/) | [XML](http://developer.51cto.com/col/1315/) | [语言工具](http://developer.51cto.com/col/585/) | [测试](http://developer.51cto.com/col/1312/) | [游戏](http://developer.51cto.com/col/1314/) | [移动](http://developer.51cto.com/col/583/) | [架构](http://developer.51cto.com/col/1308/) | [项目管理](http://developer.51cto.com/col/586/) | [全部文章](http://publish.51cto.com/list/460/)
[]()
您所在的位置： [首页](http://www.51cto.com/) > [开发](http://developer.51cto.com/) > [JAVA](http://developer.51cto.com/col/461/) > [JAVA专区](http://developer.51cto.com/col/1000/) > [基础教程](http://developer.51cto.com/col/1005/) >

# 使用Java正则表达式匹配、替换HTML内容

[http://developer.51cto.com/](http://developer.51cto.com/)  2009-06-10 13:51    新浪科技  [我要评论(0)](http://www.51cto.com/php/feedbackt.php?id=127998)
* 摘要：本文向您介绍使用Java正则表达式匹配和替换HTML的内容，作者介绍了两种方法，一种用于替换链接地址，一种用于替换图片。
* 标签：[Java正则表达式](http://www.51cto.com/php/search.php?keyword=Java%D5%FD%D4%F2%B1%ED%B4%EF%CA%BD)  [匹配](http://www.51cto.com/php/search.php?keyword=%C6%A5%C5%E4)  [替换](http://www.51cto.com/php/search.php?keyword=%CC%E6%BB%BB)
*

曾经了解过JavaScript的正则表达式，知道其功能的强大，对于处理文本比用普通的API处理不管从效率上还是从功能上都有很大的优势。今天项目要求用到Java的正则表达式，于是在网上Google，找到一个Jakarta ORO的库，听说是Java中功能最强大的正则表达式库，确实也如此，Sun公司的JDK里自带的正则表达式功能是远远不如ORO库，从正则表达式的角度上看，其比普通的API处理文本是复杂很多。

但如果应用得恰当的话，会提高工程的质量，于是项目中就应用了这个ORO库，把浏览器请求得到的HTML页面进行解释替换实现一个代理采集信息的功能。感觉自己好像是在开发软件，不是在设计网页。正则表达式有一个很好用的工具--RegexBuddy，应用这个工具可以调度一个匹配你需要的正则表达式串，经过几番调度，把一些HTML标签的正则表达式匹配出来。

第一：像网页链接<a .......... href="[url1]" .......>之间的内容中[URL[绝对地址替换成相对地址，首先要查找匹配这个链接，查找匹配这个串的正则表达式串为

*(<*[*\\s*a\\s+(?:[^\\s>]\\s*){0,})href\\s*=\\s*(\"|'|)([^\\2\\s>]*)\\2((?:\\s*[^\\s>]){0,}\\s*]()**>)*

1. //查找匹配的代码如下：  
1.     String  patternStrs="(<\\s*a\\s+(?:[^\\s>]\\s*){0,})href\\s*=\\s*
(\"|'|)([^\\2\\s>]*)\\2((?:\\s*[^\\s>]){0,}\\s *>)";  
1.     PatternCompiler complier = new Perl5Compiler();  
1.     PatternMatcher matcher = new Perl5Matcher();  
1.  
1.     Pattern patternForLink = complier.compile(patternStrs,  
1.                                               Perl5Compiler.  
1.                                               CASE_INSENSITIVE_MASK);  
1.     PatternMatcherInput input = new PatternMatcherInput(htmlContent);  
1.     while (matcher.contains(input, patternForLink)) {  
1.       MatchResult match = matcher.getMatch();  
1.       //处理匹配的结果，是要替换还是要其他处理  
1.     }  
1.  

第二：对其他的标签也类似只要把匹配的字符串改一下为要匹配的标签就可以了。(如IMG标签)

*(<\s*img\s+(?:[^\s>]\s*){0,})src\s*=\s*("|'|)([^\2\s>]*)\2((?:\s*[^\s>]){0,}\s*>)，*这样就可以处理

<img.....................src="[url]"...............>的标签匹配，对其他的标签也一样.

总结：对于大量要处理的文本，建议还是用到正则表达式，而要处理的文本比较少时，用普通的字符串API处理函数就足够了。

【编辑推荐】

1. [Java正则表达式的解释说明](http://developer.51cto.com/art/200906/127741.htm)
1. [JAVA正则表达式4种常用的功能](http://developer.51cto.com/art/200906/127717.htm)
1. [Java正则表达式之group()](http://developer.51cto.com/art/200906/127640.htm)
1. [Java正则表达式入门](http://developer.51cto.com/art/200902/110238.htm)
1. [Java正则表达式初学者使用法简介](http://developer.51cto.com/art/200812/100610.htm)
【责任编辑：[red7](mailto:liusn@51cto.com) TEL：（010）68476606】
原文：[使用Java正则表达式匹配、替换HTML内容](http://developer.51cto.com/art/200906/127998.htm)

上一篇： [Java正则表达式工具类实例](http://developer.51cto.com/art/200906/127994.htm) 下一篇： [Java GUI的发展和演化简史](http://developer.51cto.com/art/200906/128100.htm)
* ![]() 相关文章
* ·[浅谈Java正则表达式中的Pattern类与Matcher类](http://developer.51cto.com/art/200906/131761.htm "浅谈Java正则表达式中的Pattern类与Matcher类")
* ·[Java正则表达式工具类实例](http://developer.51cto.com/art/200906/127994.htm "Java正则表达式工具类实例")
* ·[Java正则表达式的解释说明](http://developer.51cto.com/art/200906/127741.htm "Java正则表达式的解释说明")
* ·[JAVA正则表达式4种常用的功能](http://developer.51cto.com/art/200906/127717.htm "JAVA正则表达式4种常用的功能")
* ·[Java正则表达式之group()](http://developer.51cto.com/art/200906/127640.htm "Java正则表达式之group()")

* ![]() 频道热门
* ·[半数软件开发商因收购重新审视Java](http://developer.51cto.com/art/200907/137210.htm "半数软件开发商因收购重新审视Java")
* ·[Google Wave将于九月底面向10万用户公测](http://developer.51cto.com/art/200907/138415.htm "Google Wave将于九月底面向10万用户公测")
* ·[MySQL一派添“轻功”Drizzle+PHP抢先体验](http://database.51cto.com/art/200907/137239.htm "MySQL一派添“轻功”Drizzle+PHP抢先体验")
* ·[Windows 7千人核心开发团队揭秘](http://developer.51cto.com/art/200907/138027.htm "Windows 7千人核心开发团队揭秘 ")
* ·[Ruby高手点评Scala编程语言十大绝招](http://developer.51cto.com/art/200907/138074.htm "Ruby高手点评Scala编程语言十大绝招")

[![ASP.NET数据库开发手册]()](http://developer.51cto.com/art/200907/138855.htm "ASP.NET数据库开发手册")

[![51CTO教你做SEO狂人]()](http://developer.51cto.com/art/200907/133817.htm "51CTO教你做SEO狂人")
[![HTML 5 下一代Web开发标准详解]()](http://developer.51cto.com/art/200907/133407.htm "HTML 5 下一代Web开发标准详解")

[![Scala编程语言]()](http://developer.51cto.com/art/200906/127830.htm "Scala编程语言")
[![大型网站架构技术专家谈]()](http://developer.51cto.com/art/200905/124179.htm "大型网站架构技术专家谈")
[查看所有评论](http://www.51cto.com/php/feedbackt.php?id=127998)()

 验证码： ![]() (点击刷新验证码)   匿名发表

## [频道推荐](http://developer.51cto.com/click/1005)

[更多>>](http://developer.51cto.com/click/1005)

* ·[半数软件开发商因收购重新审视Java](http://developer.51cto.com/art/200907/137210.htm "半数软件开发商因收购重新审视Java")
* ·[Google Wave将于九月底面向10万用户公测](http://developer.51cto.com/art/200907/138415.htm "Google Wave将于九月底面向10万用户公测")
* ·[MySQL一派添“轻功”Drizzle+PHP抢先体验](http://database.51cto.com/art/200907/137239.htm "MySQL一派添“轻功”Drizzle+PHP抢先体验")
## [热点标签](http://www.51cto.com/)

[刀片服务器](http://server.51cto.com/Blade "刀片服务器专区")   [云计算](http://cloud.51cto.com/ "云计算频道全新上线")   [ARP攻防](http://netsecurity.51cto.com/art/200609/31897.htm "ARP攻击与防御")   [思科培训](http://training.51cto.com/cisco "思科培训技术专区")  
## [全站热点](http://www.51cto.com/)

[更多>>](http://www.51cto.com/)

[![ARP攻击防范与解决方案]()](http://netsecurity.51cto.com/art/200609/31897.htm "ARP攻击防范与解决方案")

[ARP攻击防范与..](http://netsecurity.51cto.com/art/200609/31897.htm "ARP攻击防范与解决方案")

[![2009年上半年软考最新试题与答案]()](http://training.51cto.com/art/200804/71335.htm "2009年上半年软考最新试题与答案")

[2009年上半年..](http://training.51cto.com/art/200804/71335.htm "2009年上半年软考最新试题与答案")
* ·[成本速度定成败 四种宽带接入技术大比拼](http://network.51cto.com/art/200907/137241.htm "成本速度定成败 四种宽带接入技术大比拼")
* ·[H3C交换机配置案例：防止同网段ARP攻击](http://netsecurity.51cto.com/art/200907/132905.htm "H3C交换机配置案例：防止同网段ARP攻击")
* ·[7月第3周要闻回顾：Firefox兵祸连结 微软谷歌..](http://news.51cto.com/art/200907/137687.htm "7月第3周要闻回顾：Firefox兵祸连结 微软谷歌再起战端")
* ·[半数软件开发商因收购重新审视Java](http://developer.51cto.com/art/200907/137210.htm "半数软件开发商因收购重新审视Java")
* ·[熊猫烧香主犯将出狱 接受专访称想去大网络公司..](http://fellow.51cto.com/art/200907/137755.htm "熊猫烧香主犯将出狱 接受专访称想去大网络公司工作")

## [技术人](http://fellow.51cto.com/)

[更多>>](http://fellow.51cto.com/)
[![]()](http://fellow.51cto.com/art/200906/130832.htm "乔布斯病假月底结束 能否上岗决定苹果前途")

[乔布斯病假月底..](http://fellow.51cto.com/art/200906/130832.htm "乔布斯病假月底结束 能否上岗决定苹果前途")

[![]()](http://fellow.51cto.com/art/200906/126354.htm "魔兽易主，三大矛盾存隐患")

[魔兽易主，三大..](http://fellow.51cto.com/art/200906/126354.htm "魔兽易主，三大矛盾存隐患")

* ·[熊猫烧香主犯将出狱 接受专访称想去大网络公司..](http://fellow.51cto.com/art/200907/137755.htm "熊猫烧香主犯将出狱 接受专访称想去大网络公司工作")
* ·[魔兽玩家掀起史上最大规模维权 称行政审批应便..](http://fellow.51cto.com/art/200907/137213.htm "魔兽玩家掀起史上最大规模维权 称行政审批应便民")
* ·[职业教育与学历教育，哪个更重要？](http://training.51cto.com/art/200907/137727.htm "职业教育与学历教育，哪个更重要？")
* ·[Sun股东批准与甲骨文合并 8月或能完成协议](http://job.51cto.com/art/200907/137196.htm "Sun股东批准与甲骨文合并 8月或能完成协议")
* ·[富士康25岁员工跳楼自杀 据称曾遭公司拘禁殴打](http://fellow.51cto.com/art/200907/138008.htm "富士康25岁员工跳楼自杀 据称曾遭公司拘禁殴打")
## [读书](http://book.51cto.com/)

[更多>>](http://book.51cto.com/)

[![]()](http://book.51cto.com/art/200907/137586.htm "我也能做CTO之程序员职业规划")

* 
## [我也能做CTO之程序员职业规划](http://book.51cto.com/art/200907/137586.htm)
* 作者：高阳
* 你是否每天例行的上下班很累，感觉自己就像一个木头人被推着走这走那？你是否感觉不满：重复的工作真的很无聊，目前凭我的能力..
* ·[Java程序员 上班那点事儿](http://book.51cto.com/art/200906/131809.htm "Java程序员 上班那点事儿")
* ·[亮剑.NET. 图解C#开发实战](http://book.51cto.com/art/200906/131503.htm "亮剑.NET. 图解C#开发实战")
* ·[Oracle PL/SQL实例精解](http://book.51cto.com/art/200907/134805.htm "Oracle PL/SQL实例精解")
* ·[把脉VC++](http://book.51cto.com/art/200907/133513.htm "把脉VC++")

## [优秀博文](http://blog.51cto.com/)

[更多>>](http://blog.51cto.com/)
## [最新热帖](http://bbs.51cto.com/hotthreads.php)

[更多>>](http://bbs.51cto.com/hotthreads.php)

## [技术快讯](http://www.51cto.com/col/1323/)

[查看样刊](http://www.51cto.com/col/1323/)

[]()
[]()

Copyright©2005-2009 51CTO.COM 版权所有
