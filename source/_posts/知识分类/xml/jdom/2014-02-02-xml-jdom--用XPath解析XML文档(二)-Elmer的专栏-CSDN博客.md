---
layout: post
title: "用XPath解析XML文档(二) - Elmer的专栏 - CSDN博客"
categories: xml
tags: 
 - xml
 - jdom
--- 

# 用XPath解析XML文档(二) - Elmer的专栏 - CSDN博客

# [Elmer的专栏](http://blog.csdn.net/Elmer)

## Impossible is nothing!

* [条新通知](http://hi.csdn.net/space-notice.html)
* [登录](http://passport.csdn.net/UserLogin.aspx)
* [注册](http://passport.csdn.net/CSDNUserRegister.aspx)
* [欢迎](http://hi.csdn.net/)
* [退出](http://writeblog.csdn.net/Signout.aspx)
* [我的博客](http://blog.csdn.net/)
* [配置](http://writeblog.csdn.net/configure.aspx)
* [写文章](http://writeblog.csdn.net/PostEdit.aspx)
* [文章管理](http://writeblog.csdn.net/PostList.aspx)
* [博客首页](http://blog.csdn.net/)

*
* 全站 当前博客
*

* [空间](http://hi.csdn.net/Elmer)
* [博客](http://blog.csdn.net/Elmer)
* [好友](http://hi.csdn.net/!s/friend/list/Elmer)
* [相册](http://hi.csdn.net/!s/album/list/Elmer)
* [留言](http://hi.csdn.net/!s/wall/to/Elmer)

用户操作[[留言]](http://hi.csdn.net/!s/wall/to/Elmer)  [[发消息]](http://hi.csdn.net/!s/msg/to/Elmer)  [[加为好友]](http://hi.csdn.net/!s/friend/add/Elmer) 订阅我的博客[![XML聚合]()](http://feeds.feedsky.com/csdn.net/Elmer)   [![FeedSky]()](http://feeds.feedsky.com/csdn.net/Elmer)[![订阅到鲜果]()](http://www.xianguo.com/subscribe.php?url=http://feeds.feedsky.com/csdn.net/Elmer)[![订阅到Google]()](http://fusion.google.com/add?feedurl=http://feeds.feedsky.com/csdn.net/Elmer)[![订阅到抓虾]()](http://www.zhuaxia.com/add_channel.php?url=http://feeds.feedsky.com/csdn.net/Elmer)[[编辑]](http://writeblog.csdn.net/configure.aspx)Elmer的公告[[编辑]](http://writeblog.csdn.net/EditCategories.aspx?catID=1)文章分类* [![(RSS)]()](http://blog.csdn.net/Elmer/category/228863.aspx/rss)[Ajax/Javascript](http://blog.csdn.net/Elmer/category/228863.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/596531.aspx/rss)[BPM/Workflow](http://blog.csdn.net/Elmer/category/596531.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/228857.aspx/rss)[core java](http://blog.csdn.net/Elmer/category/228857.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/228860.aspx/rss)[J2EE与开源框架](http://blog.csdn.net/Elmer/category/228860.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/228922.aspx/rss)[Linux and Unix](http://blog.csdn.net/Elmer/category/228922.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/228909.aspx/rss)[SOA与Webservice](http://blog.csdn.net/Elmer/category/228909.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/228865.aspx/rss)[SQL与数据建模](http://blog.csdn.net/Elmer/category/228865.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/340236.aspx/rss)[XML/XSL](http://blog.csdn.net/Elmer/category/340236.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/326068.aspx/rss)[软件工程与项目管理](http://blog.csdn.net/Elmer/category/326068.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/228861.aspx/rss)[设计模式与UML](http://blog.csdn.net/Elmer/category/228861.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/346873.aspx/rss)[生活与杂谈](http://blog.csdn.net/Elmer/category/346873.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/228871.aspx/rss)[数据结构与算法](http://blog.csdn.net/Elmer/category/228871.aspx)
* [![(RSS)]()](http://blog.csdn.net/Elmer/category/239599.aspx/rss)[英语学习](http://blog.csdn.net/Elmer/category/239599.aspx)[[编辑]](http://writeblog.csdn.net/EditLinks.aspx)其它[java开源大全](http://www.open-open.com/)[袁峰blog](http://fengyuancom.spaces.live.com/default.aspx)[[编辑]](http://writeblog.csdn.net/EditLinks.aspx)英文技术网站[Apache组织](http://www.apache.org/)[focus on java](http://java.about.com/)[hot-oracle](http://www.hot-oracle.com/)[java.net](http://www.java.net/)[javalobby.org](http://www.javalobby.org/)[java-tips](http://www.java-tips.org/)[javaworld](http://www.javaworld.com/)[onjava](http://www.onjava.com/)[sourceforge](http://sourceforge.net/index.php)[theserverside](http://www.theserverside.com/)[[编辑]](http://writeblog.csdn.net/EditLinks.aspx)英文学习资源[antimoon](http://www.antimoon.com/)[Shanghai Daily](http://www.shanghaidaily.com/)[国家地理杂志](http://www.nationalgeographic.com/)[时代周刊](http://www.time.com/time/)[爱尔兰时代报](http://www.ireland.com/)[财富杂志](http://www.fortune.com/)[[编辑]](http://writeblog.csdn.net/EditLinks.aspx)中文技术网站[Ajax中国](http://ajaxcn.org/space/start)[bea中国开发者](http://dev2dev.bea.com.cn/)[blogjava](http://www.blogjava.net/)[IBM中国 developerworks](http://www-128.ibm.com/developerworks/cn/)[itpub](http://www.itpub.net/)[javaeye](http://www.javaeye.com/)[matrix](http://www.matrix.org.cn/)[Oracle中国开发人员中心](http://www.oracle.com/technology/global/cn/tech/java/index.html)[umlchina](http://www.umlchina.com/)[UML软件工程组织](http://www.uml.org.cn/)[灰狐](http://www.huihoo.com/)存档* [2008年12月(1)](http://blog.csdn.net/Elmer/archive/2008/12.aspx)
* [2008年11月(1)](http://blog.csdn.net/Elmer/archive/2008/11.aspx)
* [2008年09月(2)](http://blog.csdn.net/Elmer/archive/2008/09.aspx)
* [2008年01月(2)](http://blog.csdn.net/Elmer/archive/2008/01.aspx)
* [2007年11月(1)](http://blog.csdn.net/Elmer/archive/2007/11.aspx)
* [2007年08月(3)](http://blog.csdn.net/Elmer/archive/2007/08.aspx)
* [2007年07月(6)](http://blog.csdn.net/Elmer/archive/2007/07.aspx)
* [2006年09月(1)](http://blog.csdn.net/Elmer/archive/2006/09.aspx)
* [2004年12月(1)](http://blog.csdn.net/Elmer/archive/2004/12.aspx)
# ![翻译]()  用XPath解析XML文档(二) [收藏]( "收藏到我的网摘中，并分享给我的朋友")

  

**用****JDOM XPath****类解析**
JDOM API类支持XPath表达式从XML文档定位节点。JDOM XPath类的一些方法列在下表： **XPath Class Method** **Description** selectSingleNode 用于匹配XPath来定位单结点。 selectNodes 用于匹配XPath来定位结点集。 addNamespace 通过增加命名空间来匹配含有命名空间前缀的XPath。

 
在本节中，用JDOM XPath类从XML示例文档*catalog.xml**定位节点的过程将会被讨论。被**select**方法定位的结点被修改，被修改的文档输出成**XML**文档。首先，导入**JDOM**的包*org.jdom.xpath

import org.jdom.xpath.*;
 

创建一个SAXBuilder
SAXBuilder saxBuilder =

    new SAXBuilder("org.apache.xerces.parsers.SAXParser");
 

用SAXBuilder解析XML文档*catalog.xml**：*
org.jdom.Document jdomDocument =

    saxBuilder.build(xmlDocument);
 

xmlDocument是XML文档*catalog.xml**的*java.io.File*代表，静态方法*selectSingleNode(java.lang.Object context, String XPathExpression)用一个特定的XPath表达式定位一个单结点。如果超过一个结点匹配XPath表达式，则第一个结点被选择。用XPath定位一个journal的article元素属性结点level,并将journal属性结点title设置为Java Technology,将article元素属性结点date设置成January-2004。
org.jdom.Attribute levelNode =

    (org.jdom.Attribute)(XPath.selectSingleNode(
        jdomDocument,

        "/catalog//journal[@title='JavaTechnology']" +
        "//article[@date='January-2004']/@level"));

 
则level属性值Advanced被定位，修改level结点。

levelNode.setValue("Intermediate");
 

selectSingleNode方法也可以用来在XML文档中定位结点。作为示例，选择一个title结点，用XPath定位结点。
org.jdom.Element titleNode =

    (org.jdom.Element) XPath.selectSingleNode( jdomDocument,
    "/catalog//journal//article[@date='January-2004']/title");

title结点值Design service-oriented architecture frameworks with J2EE technology被定位，修改title结点。
titleNode.setText(

    "Service Oriented Architecture Frameworks");
 

静态方法selectNodes(java.lang.Object context, String XPathExpression)选择XPath指定的所有结点。定位journal的所有article结点，并将journal的属性title设置为Java Technology。
java.util.List nodeList =

    XPath.selectNodes(jdomDocument,
    "/catalog//journal[@title='Java Technology']//article");

 
修改article结点，添加属性到article结点。

Iterator iter=nodeList.iterator();
while(iter.hasNext()) {

    org.jdom.Element element =
        (org.jdom.Element) iter.next();

    element.setAttribute("section", "Java Technology");
}

 
JDOM XPath类支持定位含有命名空间前缀的结点。定位有命名空间的结点，添加命名空间到XPath:

XPath xpath =
   XPath.newInstance(

    "/catalog//journal:journal//article/@journal:level");
xpath.addNamespace("journal",

    "http://www.w3.org/2001/XMLSchema-Instance"
);

 
如上，则前缀为journal的命名空间添加到XPath对象。定位包含命名空间前缀的结点。

levelNode = (org.jdom.Attribute)
    xpath.selectSingleNode(jdomDocument);

 
属性结点journal:level被定位。修改此结点：

levelNode.setValue("Advanced");
 

*Java**程序**JDomParser.java**被用来从**XML**文档**catalog.xml**选择结点。在本节，介绍了用**JDOM**的**XPath**类的**select**方法从一个**XML**文档中定位结点的过程。定位的结点被修改，被修改的文档通过*XMLOutputter类输出为一个XML文档。*catalog-modified.xml**就是此输出的**XML**文档。*
***结论***

*在本教程中，用**XPath**解析了一个**XML**文档。**XPath**仅用来定位结点。在本教程中讨论的**XPath API**不是用来用**XPath**为**XML**文档修改结点值的。为了修改结点的值，*org.w3c.dom包的setter方法是必须的。

发表于 @ 2008年01月22日　11:47:00 | [评论( loading...  )](http://blog.csdn.net/Elmer/archive/2008/01/22/2058533.aspx#FeedBack "评论")| [编辑](http://writeblog.csdn.net/PostEdit.aspx?entryId=2058533 "编辑")| [举报](mailto:webmaster@csdn.net?subject=Article Report!!!&body=Author:ElmerURL:http://blog.csdn.net/ArticleContent.aspx?UserName=Elmer&Entryid=2058533)| [收藏]( "收藏到我的网摘中，并分享给我的朋友")

### [旧一篇:用XPath解析XML文档(一)](http://blog.csdn.net/Elmer/archive/2008/01/17/2049922.aspx) | [新一篇:Shell中的grep、awk和sed的常用命令和语法](http://blog.csdn.net/Elmer/archive/2008/09/23/2968477.aspx)

[查看最新精华文章 请访问博客首页](http://blog.csdn.net/)相关文章[]()

* 发表评论
 
* 表 情：
* [![顶]( "顶")](http://blog.csdn.net/Elmer/archive/2008/01/22/2058533.aspx#) [![砸]( "砸")](http://blog.csdn.net/Elmer/archive/2008/01/22/2058533.aspx#) [![棒]( "棒")](http://blog.csdn.net/Elmer/archive/2008/01/22/2058533.aspx#) [![大笑]( "大笑")](http://blog.csdn.net/Elmer/archive/2008/01/22/2058533.aspx#) [![愤怒]( "愤怒")](http://blog.csdn.net/Elmer/archive/2008/01/22/2058533.aspx#) [![大哭]( "大哭")](http://blog.csdn.net/Elmer/archive/2008/01/22/2058533.aspx#) [![疑问]( "疑问")](http://blog.csdn.net/Elmer/archive/2008/01/22/2058533.aspx#) [![汗]( "汗")](http://blog.csdn.net/Elmer/archive/2008/01/22/2058533.aspx#) [![呕吐]( "呕吐")](http://blog.csdn.net/Elmer/archive/2008/01/22/2058533.aspx#) [![送花]( "送花")](http://blog.csdn.net/Elmer/archive/2008/01/22/2058533.aspx#)

* 评论内容：
*
* 用 户 名：
* [登录]() [注册](http://passport.csdn.net/CSDNUserRegister.aspx) 匿名评论

* 验 证 码：
* [![验证码]()]() [重新获得验证码]()

*
*

Copyright © ElmerPowered by CSDN Blog![]()
