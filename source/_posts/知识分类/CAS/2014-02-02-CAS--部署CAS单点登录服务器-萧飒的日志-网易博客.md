---
layout: post
title: "部署CAS单点登录服务器 - 萧飒的日志 - 网易博客"
categories: CAS
tags: 
 - CAS
--- 

# 部署CAS单点登录服务器 - 萧飒的日志 - 网易博客

[网易 ](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://www.163.com/)

[新闻](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://news.163.com/)[微博](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://t.163.com/)[邮箱](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://email.163.com/)[相册](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://photo.163.com/)[阅读](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://yuedu.163.com/)[有道](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://www.youdao.com/)[摄影](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://photo.163.com/pp/square/)[爱拍](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://aipai.163.com?from=163blog)[云笔记](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://note.youdao.com/?vendor=163blog)[闪电邮](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://fm.163.com/?fmblogzx0628)[手机邮](http://m.123.163.com/?frombkcp)[印像派](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://yxp.163.com/)[游戏江湖](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://hi.163.com/?from=bkcp) [更多](http://blog.163.com/redirect.html?frompersonalbloghome&url=http://sitemap.163.com/)
 

[博客 ](http://blog.163.com/?frompersonalbloghome)

[手机博客](http://blog.163.com/services/wapblog.html?frompersonalbloghome)[博客搬家](http://blog.163.com/clone/clone.html?frompersonalbloghome)[博客VIP服务](http://blog.163.com/vip.do?frompersonalbloghome) [LiveWriter写博](http://blog.163.com/blog_admin/blog/static/721279201082863728829/?frompersonalbloghome)[word写博](http://blog.163.com/blog_admin/blog/static/721279201092713253500/?frompersonalbloghome)[邮件写博](http://blog.163.com/services/mailblog.html?frompersonalbloghome)[短信写博](http://blog.163.com/services/emsblog.html?frompersonalbloghome) [群博客](http://blog.163.com/showMultiUser.do?frompersonalbloghome)[博客油菜地](http://blog.163.com/BLOG_YOUCAI/)[博客话题](http://blog.163.com/ht/?frompersonalbloghome)[博客热点](http://blog.163.com/hot/history/?frompersonalbloghome)[博客圈子](http://q.163.com/#home?frompersonalbloghome)[找朋友](http://blog.163.com/findFriend.do?type=5?frompersonalbloghome)
[发现](http://blog.163.com/public/explore/?frompersonalbloghome)

[小组](http://blog.163.com/g/?frompersonalbloghome)
[风格](http://blog.163.com/public/theme/?frompersonalbloghome)

[](http://blog.163.com/randomUser.do "随便看看")
 

[网易真人搭配社区iStyle](http://istyle.163.com/)

[网易轻博客LOFTER](http://www.lofter.com/)

[创建博客](http://reg.163.com/reg/reg.jsp?product=blog&url=http://blog.163.com/ntesRegBlank.html&loginurl=http://blog.163.com/) [登录](http://slf-1983.blog.163.com/blog/static/2990236320124331628240/#)  

 加关注

[](http://slf-1983.blog.163.com/blog/static/2990236320124331628240/)   [显示下一条](http://slf-1983.blog.163.com/blog/static/2990236320124331628240/)  |  [关闭](http://slf-1983.blog.163.com/blog/static/2990236320124331628240/)

[](http://blog.163.com/public/explore/?fromblogbanner)
[](http://www.lofter.com/invite/163blog/?email=)
# 萧飒的博客

未来的成功往往是现在无法想象的……
 [](http://slf-1983.blog.163.com/blog/static/2990236320124331628240/#)

## 导航

* [首页](http://slf-1983.blog.163.com/)
* [日志](http://slf-1983.blog.163.com/blog/)
* [相册](http://slf-1983.blog.163.com/album/)
* [音乐](http://slf-1983.blog.163.com/music/)
* [收藏](http://slf-1983.blog.163.com/collection/)
* [博友](http://slf-1983.blog.163.com/friends/)
* [关于我](http://slf-1983.blog.163.com/profile/)
 

## 日志

 

[cas改造随笔](http://slf-1983.blog.163.com/blog/static/299023632012431659898/)
 

[jsessionid的困扰](http://slf-1983.blog.163.com/blog/static/29902363201243323076/)

### 部署CAS单点登录服务器  

2012-05-03 15:16:28|  分类： [编程](http://slf-1983.blog.163.com/blog/#m=0&t=1&c=fks_082068080083080065083095074065093095081065087080085 "编程") |  标签： |字号大中小 [订阅]()

**第0步：环境配置**

操作系统：CentOS 5.5 64位

JDK：1.7

Tomcat：7.0

CAS Server：3.4.11

CAS Client：3.2.1

 

**第1步：安装JAVA并设置环境变量**

从[http://www.oracle.com/technetwork/java/javase/downloads/jdk-7u3-download-1501626.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk-7u3-download-1501626.html)

下载并安装Linux x64 RPM包
rpm -i jdk-7u3-linux-x64.rpm

设置环境变量

vi /etc/profile

加入

JAVA_HOME=/usr/java/jdk1.7.0_03 export JAVA_HOME

方便操作将keytool加入/usr/bin/

ln -s /usr/java/jdk1.7.0_03/bin/keytool /usr/bin/keytool

 

**第2步：安装Tomcat**

从[http://tomcat.apache.org/download-70.cgi](http://tomcat.apache.org/download-70.cgi)

下载Tomcat并解压

tar -zxvf apache-tomcat-7.0.26.tar.gz

方便操作将启动关闭加入/usr/bin/
ln -s /usr/local/tomcat/bin/startup.sh /usr/bin/tomcat-start ln -s /usr/local/tomcat/bin/shutdown.sh /usr/bin/tomcat-stop

 

**第3步：创建、导出、导入证书**

创建一个生成证书的脚本
vi create_https_cert.sh # 删除原证书库 keytool -delete -keystore /home/cas/cascerts -storepass changeit # 删除原别名 keytool -delete -alias sgstsso -storepass changeit # 生成证书，需要注意的是dname需要使用域名或主机名，不能用IP，keystore 为生成的证书库地址，后面TOMCAT会用到 keytool -genkey -keyalg RSA -alias sgstsso -keystore /home/cas/cascerts -dname "CN=cas.sgst.cn" -storepass changeit # 导出证书，导出的证书用在各客户端的JDK导入 keytool -export -alias sgstsso -keystore /home/cas/cascerts -file /home/cas/sgstsso.crt -storepass changeit # 导入证书 keytool -import -alias sgstsso -file /home/cas/sgstsso.crt -keystore $JAVA_HOME/jre/lib/security/cacerts -storepass changeit

执行该脚本。

 

**第4步：应用证书到Tomcat**

编辑conf/server.xml加入下面这段（如果8443 https已开启使用的则在其基础上修改）
<Connector protocol="org.apache.coyote.http11.Http11Protocol" port="8443" minSpareThreads="5" enableLookups="true" disableUploadTimeout="true" acceptCount="100" maxThreads="200" scheme="https" secure="true" SSLEnabled="true" keystoreFile="/home/cas/cascerts" keystorePass="changeit" truststoreFile="/usr/java/jdk1.7.0_03/jre/lib/security/cacerts" clientAuth="false" sslProtocol="TLS"/>

重启Tomcat，访问https://localhost:8443，如果能否访问则配置成功。

 

**第5步：配置CAS服务器**

从[http://www.jasig.org/cas/download](http://www.jasig.org/cas/download)下载[CAS Server 3.4.11 Release](http://www.jasig.org/cas_server_3_4_11_release)压缩包

解压后将其中的cas-server-3.4.11.war改名为cas.war放在tomcat下面

此时打开https://localhost:8443/cas/login即可访问

输入sgst/sgst登录成功（默认为简单认证，即用户名密码一样就算通过）

编辑tomcat/conf/server.xml在原Host下面增加以下这段
<Host name="cas.sgst.cn" appBase="/home/cas/webapps" unpackWARs="true" autoDeploy="true"> <Context path='' docBase='cas'/> <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs" prefix="cas_access_log." suffix=".txt" pattern="%h %l %u %t &quot;%r&quot; %s %b" /> </Host>

这样实现以https://cas.sgst.cn:8443 访问cas

CAS的认证改为查询数据库用户名密码验证：

编辑cas/WEB-INF/deployerConfigContext.xml

将
<bean class="org.jasig.cas.authentication.handler.support.SimpleTestUsernamePasswordAuthenticationHandler" />

注释掉，新增下面这段

<bean class="org.jasig.cas.adaptors.jdbc.QueryDatabaseAuthenticationHandler"> <property name="dataSource" ref="casDataSource" /> <property name="sql" value="select userpwd from idsuser where lower(username) = lower(?)" /> <property name="passwordEncoder" ref="myPasswordEncoder"/> </bean>

上面的加密根据个人需求可自行开发，这里用的是MD5 64位加密，以一个独立bean跟在后面

<bean id="myPasswordEncoder"/>

casDataSource则同样以一个独立bean跟在后面

<bean id="casDataSource" class="org.apache.commons.dbcp.BasicDataSource"> <property name="driverClassName"> <value>oracle.jdbc.driver.OracleDriver</value> </property> <property name="url"> <value>jdbc:oracle:thin:@(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST = 10.10.29.104)(PORT = 1521))(ADDRESS = (PROTOCOL = TCP)(HOST = 10.10.29.105)(PORT = 1521))(ADDRESS = (PROTOCOL = TCP)(HOST = 10.10.29.106)(PORT = 1521))(LOAD_BALANCE = yes)(CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = genome)))</value> </property> <property name="username"> <value>trs_ids</value> </property> <property name="password"> <value>123456</value> </property> </bean>

保存该文件，复制压缩包中的modules里的cas-server-support-jdbc-3.4.11.jar和ojdbc14.jar到cas/WEB-INF/lib下

重启Tomcat后CAS便以用户名密码进行验证。

 

**第6步：配置CAS客户端**

从[http://www.jasig.org/cas/client-integration](http://www.jasig.org/cas/client-integration)参考适合的客户端，JAVA的在这里下载[http://downloads.jasig.org/cas-clients/](http://downloads.jasig.org/cas-clients/)

客户端中相应的JAR包都有，对应的maven为
<!-- cas --> <dependency> <groupId>org.jasig.cas.client</groupId> <artifactId>cas-client-core</artifactId> <version>3.2.1</version> </dependency>

修改web.xml增加以下filter

<!-- ======================== 单点登录开始 ======================== --> <!-- 用于单点退出，该过滤器用于实现单点登出功能，可选配置--> <listener> <listener-class>org.jasig.cas.client.session.SingleSignOutHttpSessionListener</listener-class> </listener> <!-- 该过滤器用于实现单点登出功能，可选配置。 --> <filter> <filter-name>CAS Single Sign Out Filter</filter-name> <filter-class>org.jasig.cas.client.session.SingleSignOutFilter</filter-class> </filter> <filter-mapping> <filter-name>CAS Single Sign Out Filter</filter-name> <url-pattern>/check/*</url-pattern> </filter-mapping> <!-- 该过滤器负责用户的认证工作，必须启用它 --> <filter> <filter-name>CASFilter</filter-name> <filter-class>org.jasig.cas.client.authentication.AuthenticationFilter</filter-class> <init-param> <param-name>casServerLoginUrl</param-name> <!-- 这里是服务器端地址 --> <param-value>https://cas.sgst.cn:8443/login</param-value> </init-param> <init-param> <param-name>serverName</param-name> <param-value>http://localhost:8080</param-value> </init-param> </filter> <filter-mapping> <filter-name>CASFilter</filter-name> <url-pattern>/check/*</url-pattern> </filter-mapping> <!-- 该过滤器负责对Ticket的校验工作，必须启用它 --> <filter> <filter-name>CAS Validation Filter</filter-name> <filter-class> org.jasig.cas.client.validation.Cas20ProxyReceivingTicketValidationFilter </filter-class> <init-param> <param-name>casServerUrlPrefix</param-name> <param-value>https://cas.sgst.cn:8443</param-value> </init-param> <init-param> <param-name>serverName</param-name> <param-value>http://localhost:8080</param-value> </init-param> </filter> <filter-mapping> <filter-name>CAS Validation Filter</filter-name> <url-pattern>/check/*</url-pattern> </filter-mapping> <!-- 该过滤器负责实现HttpServletRequest请求的包裹， 比如允许开发者通过HttpServletRequest的getRemoteUser()方法获得SSO登录用户的登录名，可选配置。 --> <filter> <filter-name>CAS HttpServletRequest Wrapper Filter</filter-name> <filter-class>org.jasig.cas.client.util.HttpServletRequestWrapperFilter</filter-class> </filter> <filter-mapping> <filter-name>CAS HttpServletRequest Wrapper Filter</filter-name> <url-pattern>/check/*</url-pattern> </filter-mapping> <!-- 该过滤器使得开发者可以通过org.jasig.cas.client.util.AssertionHolder来获取用户的登录名。 比如AssertionHolder.getAssertion().getPrincipal().getName()。 --> <filter> <filter-name>CAS Assertion Thread Local Filter</filter-name> <filter-class>org.jasig.cas.client.util.AssertionThreadLocalFilter</filter-class> </filter> <filter-mapping> <filter-name>CAS Assertion Thread Local Filter</filter-name> <url-pattern>/check/*</url-pattern> </filter-mapping> <!-- ======================== 单点登录结束 ======================== -->

2012-03-21更新： CAS filter-mapping一定要放在整个项目的encodingFilter之后，否则会造成中文乱码

 

**第7步：美化服务器界面**

具体页面在cas\WEB-INF\view\jsp\default\ui\

登录界面：casLoginView.jsp
登录成功：casGenericSuccess.jsp
登出界面：casLogoutView.jsp
  评论这张

![]() 转发至微博
![]() 转发至微博

![]() 0人  |  分享到：        

阅读(7)| 评论(0)| 转载 (0) |举报

 

 

[cas改造随笔](http://slf-1983.blog.163.com/blog/static/299023632012431659898/)
 

[jsessionid的困扰](http://slf-1983.blog.163.com/blog/static/29902363201243323076/)
### 历史上的今天

### 相关文章
### 最近读者

### 评论

[]()

this.p={ m:2, b:2, id:'fks_087066086087081064092094095065072084088074084084085069087', blogTitle:'部署CAS单点登录服务器', blogAbstract:'<span style=\"color: rgb(51, 51, 51); font-family: \'Segoe UI\', Calibri, \'Myriad Pro\', Myriad, \'Trebuchet MS\', Helvetica, Arial, sans-serif; font-size: 13px; line-height: normal;\" \><p style=\"margin-top: 0.25em; margin-bottom: 0.75em; line-height: 19px;\" \><strong\>第0步：环境配置</strong\></p\><p style=\"margin-top: 0.25em; margin-bottom: 0.75em; line-height: 19px;\" \>操作系统：CentOS 5.5 64位</p\><p style=\"margin-top: 0.25em; margin-bottom: 0.75em; line-height: 19px;\" \>JDK：1.7</p\><p style=\"margin-top: 0.25em; margin-bottom: 0.75em; line-height: 19px;\" \>Tomcat：7.0</p\><p style=\"margin-top: 0.25em; margin-bottom: 0.75em; line-height: 19px;\" \>CAS Server：3.4.11</p\><p style=\"margin-top: 0.25em; margin-bottom: 0.75em; line-height: 19px;\" \>CAS Client：3.2.1</p\></span\>', blogTag:'编程', blogUrl:'blog/static/2990236320124331628240', isPublished:1, istop:false, type:0, modifyTime:0, publishTime:1336029388240, permalink:'blog/static/2990236320124331628240', commentCount:0, mainCommentCount:0, recommendCount:0, bsrk:-100, publisherId:0, recomBlogHome:false, attachmentsFileIds:[], vote:{}, groupInfo:{}, friendstatus:'none', followstatus:'unFollow', pubSucc:'', visitorProvince:'北京', visitorCity:'西城区', postAddInfo:{}, mset:'000', mcon:'', srk:-100, remindgoodnightblog:false, isBlackVisitor:false, isShowYodaoAd:true, hostIntro:'我,犯溅一样的猪一样的懒,无语……', hmcon:'1', selfRecomBlogCount:'0', lofter_single:'<a hidefocus="true" target="_blank" href="http://www.lofter.com/reg?act=qbview_20120221_01&from=blog_01"><img onload="var nimg = new Image(); nimg.src=\'http://blog.163.com/newpage/images/analyse.png?lofter_single&t=\'+new Date().getTime()" border="0" src="http://b2.bst.126.net/newpage/images/lofter_single6.jpg"/></a>' }   {list a as x} {if !!x} <div class="iblock nbw-fce nbw-f40"> <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/${x.visitorName}/"> {if x.visitorName==visitor.userName} <img alt="${x.visitorNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.visitorName)}&r=${visitor.imageUpdateTime}"/> {else} <img alt="${x.visitorNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.visitorName)}"/> {/if} </a> <div class="cwd vname thide"> {if x.moveFrom=='wap'} <a class="noul pnt" target="_blank" href="http://blog.163.com/services/wapblog.html?frompersonalbloghome"><span title="来自网易手机博客" class="iblock wapIcon"> </span></a> {elseif x.moveFrom=='iphone'} <a class="noul pnt" target="_blank"><span title="来自iPhone客户端" class="iblock iphoneIcon"> </span></a> {elseif x.moveFrom=='android'} <a class="noul pnt" target="_blank"><span title="来自Android客户端" class="iblock androidIcon"> </span></a> {elseif x.moveFrom=='mobile'} <a class="noul pnt" target="_blank" href="http://blog.163.com/services/emsblog.html?frompersonalbloghome"><span title="来自网易短信写博" class="iblock wapIcon"> </span></a> {/if} <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/${x.visitorName}/"> ${fn(x.visitorNickname,8)|escape} </a> </div> </div> {/if} {/list}   {if !!a} <a target="_blank" href="http://blog.163.com/${a.userName}/"><img class="bdwa bdc0 pnt" onerror="this.src=location.f60" src="${fn1(a.userName)}"/></a> <a target="_blank" class="fc03 m2a" href="http://blog.163.com/${a.userName}/">${fn(a.nickname,8)|escape}</a> <div class="intro fc05">${a.selfIntro|escape}{if great260}${suplement}{/if}</div> <div class="acts ztag"></div> <div class="mbga phide xtag"> <div class="mbgai"> </div> <a class="fc03 xtag m2a" href="#" target="_blank"></a> </div> {/if}  <#--最新日志，群博日志-->  {list a as x} {if !!x} <li class="thide"><a target="_blank" class="fc03 m2a" href="${furl()}${x.permalink}/?latestBlog">${fn(x.title,26)|escape}</a></li> {/if} {/list}  <#--推荐日志-->  <p class="fc06">推荐过这篇日志的人：</p> <div> {list a as x} {if !!x} <div class="iblock nbw-fce nbw-f40"> <a class="fc03 noul" target="_blank" hidefocus="true" href="http://blog.163.com/${x.recommenderName}/"> <img alt="${x.recommenderNickname|escape}" onerror="this.src=location.f40" class="cwd bdwa bdc0" src="${fn1(x.recommenderName)}"/> </a> <div class="cwd thide"> <a class="fc03 m2a" target="_blank" hidefocus="true" href="http://blog.163.com/${x.recommenderName}/"> ${fn(x.recommenderNickname,6)|escape} </a> </div> </div> {/if} {/list} </div> {if !!b&&b.length>0} <p class="fc06">他们还推荐了：</p> <ul> {list b as y} {if !!y} <li class="rrb"><span class="iblock">·</span><a class="fc03 m2a" target="_blank" href="http://blog.163.com/${y.recommendBlogPermalink}/?from=blog/static/2990236320124331628240">${y.recommendBlogTitle|escape}</a></li> {/if} {/list} </ul> {/if}  <#--引用记录-->  <span class="pleft fc07">转载记录：</span> <ul class="tbac"> {list d as x} <li class="clearfix"> <span class="pleft iblock">·</span> <div class="tbl thide pleft"><span><a target="_blank" class="fc07 m2a" href="${x.referBlogUrl}">${x.referBlogTitle|escape}</a></span></div> <div class="tbr pleft"><span><a target="_blank" class="fc07 m2a" href="${x.referHomePage}">${x.referUserName|escape}</a></span></div> </li> {/list} </ul>  <#--博主推荐-->  {list a as x} {if !!x} <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/${x.userName}/${x.permalink}/?recommendBlog" title="${x.title|default:""|escape}">${x.title|default:""|escape}</a></li> {/if} {/list}  <#--随机阅读-->  {list a as x} {if !!x} <li class="thide"><a target="_blank" class="fc03 m2a" href="http://blog.163.com/${x.userName}/${x.permalink}/?personalRecomBlog" title="${x.title|default:""|escape}">${x.title|default:""|escape}</a></li> {/if} {/list}  <#--首页推荐-->  {list a as x} {if !!x} <li class="thide"><a target="_blank" class="fc03 m2a" target="_blank" href="${x.blogUrl|default:""|escape}?recommendReader" title="${x.blogTile|default:""|escape}">${x.blogTile|default:""|escape}</a></li> {/if} {/list}  <#--相关文章-->  <ul> {list a as x} {if x_index>9}{break}{/if} {if !!x} <li class="thide fc03"> <a class="m2a" target="_blank" target="_blank" href="${x.url|default:""}?fromdm&fromSearch&isFromSearchEngine=${isFromSearchEngine|default:"no"}" title="${x.title|default:""|escape}">${x.title|default:""|escape}</a><span class="fc07">${fn2(parseInt(x.date),'yyyy-MM-dd HH:mm:ss')}</span> </li> {/if} {/list} </ul>  <#--历史上的今天-->  <ul> {list a as x} {if x_index>4}{break}{/if} {if !!x} <li class="thide fc03"> <a class="m2a" target="_blank" href="http://blog.163.com/${x.userName}/${x.permalink|default:""}" title="${x.title|default:""|escape}">${fn1(x.title,60)|escape}</a><span class="fc07">${fn2(x.publishTime,'yyyy-MM-dd HH:mm:ss')}</span> </li> {/if} {/list} </ul>  <#--被推荐日志-->  {list a as x} {if !!x} <li class="thide"><a target="_blank" class="fc03 m2a" href="${furl()}${x.permalink}/">${fn(x.title,26)|escape}</a></li> {/if} {/list}  <#--右边模块结构-->  <div class="uinfo ztag"></div> <h4 class="fc07 fs0 ltt phide ztag">被推荐日志</h4> <ul class="ztag blst"></ul> <h4 class="fc07 fs0 ltt phide ztag">最新日志</h4> <ul class="ztag blst"></ul> <h4 class="fc07 fs0 ltt phide ztag">该作者的其他文章</h4> <ul class="ztag blst"></ul> <h4 class="fc07 fs0 ltt phide ztag">博主推荐</h4> <ul class="ztag blst"></ul> <h4 class="fc07 fs0 ltt phide ztag">相关日志</h4> <ul class="ztag blst"></ul> <h4 class="fc07 fs0 ltt phide ztag">随机阅读</h4> <ul class="ztag blst"></ul> <h4 class="fc07 fs0 ltt phide ztag">首页推荐</h4> <ul class="ztag blst"></ul> <div class="more"><a target="_blank" class="fc03 m2a" href="http://blog.163.com">更多>></a></div> <br/><br/> <div id="yodaoad_r" style="display:none;_zoom:1;"></div> <div id="lofter_single"></div>  <#--评论模块结构-->  <div class="publish ztag"></div> <div class="bdwt bds2 bdc0 phide" id="yodaoad_2" style="_zoom:1;"></div> <div class="ztag bdwt bds2 bdc0"> <div class="case"></div> <div class="clearfix"></div> </div>  <#--引用模块结构-->  <div class="close"> <span class="ztag iblock icn0 icn0-57"> </span> </div> <div class="ztag phide"></div>  <#--博主发起的投票-->  {list a as x} {if !!x} <li> <a href="http://blog.163.com/${x.userName}/" target="_blank" class="m2a fc03">${x.nickName|escape}</a>  投票给 {var first_option = true;} {list x.voteDetailList as voteToOption} {if voteToOption==1} {if first_option==false},{/if}  “${b[voteToOption_index]}”   {/if} {/list} {if (x.role!="-1") },“我是${c[x.role]}”  {/if}     <span class="fc07">    ${fn1(x.voteTime)}</span> {if x.userName==''}{/if} {/if} {/list}
 

## 页脚

[公司简介](http://corp.163.com/index_gb.html) - [联系方法](http://gb.corp.163.com/gb/contactus.html) - [招聘信息](http://corp.163.com/gb/job/job.html) - [客户服务](http://help.163.com/?b13abk1) - [隐私政策](http://corp.163.com/gb/legal/legal.html) - [博客风格](http://blog.163.com/public/theme/) - [手机博客](http://blog.163.com/services/wapblog.html) - [VIP博客](http://blog.163.com/vip.do) - [订阅此博客]()

网易公司版权所有 ©1997-2012

<a rel="nofollow" class="pr" target="_blank" href="http://help.163.com/special/007525FT/blog.html?b13aze1">帮助</a> <span class="fr iblock space icn1 icn1-4"> </span> <a class="pr" target="_blank" href="http://blog.163.com/activation.do?host=activation&&username=${u}">${u}</a>   {list wl as x} <div class="grp">${x.g}</div> {list x.l as y} <a class="itm noul" href="#" hidefocus="true" name="{if typeof(y.v)=='string'}${y.v}{else}${y_index}{/if}">${y.n}</a> {/list} {/list}   {if defined('wl')} {list wl as x}<a class="itm noul" href="#" hidefocus="true" name="${x.v}">${x.n}</a>{/list} {/if}
