---
layout: post
title: "Oracle数据库中分区表的操作方法1"
categories: DB
tags: 
 - DB
 - 分区
--- 

# Oracle数据库中分区表的操作方法1

[通行证](http://reg.163.com/)：用户名  密码 [](http://mail.163.com/)[首页](http://www.163.com/) - [新闻](http://news.163.com/) - [免费邮箱](http://www.126.com/) - [短信](http://sms.163.com/) - [POPO](http://popo.163.com/) - [相册](http://photo.163.com/) - [搜索](http://so.163.com/) - [交友](http://love.163.com/) - [拍卖](http://adfarm.mediaplex.com/ad/ck/4080-25846-9511-15?cn=netease;textlink;hp) [![NetEase]()](http://www.163.com/)
 [新闻](http://news.163.com/) | [体育](http://sports.163.com/) | [财经](http://finance.163.com/) | [娱乐](http://ent.163.com/) | [商业](http://biz.163.com/)| [**科技**](http://tech.163.com/) | [汽车](http://auto.163.com/) | [数码](http://digi.163.com/) | [女人](http://lady.163.com/) | [旅游](http://travel.163.com/) | [教育](http://education.163.com/) | [文化](http://culture.163.com/) | [广州](http://gz.163.com/) | [军事](http://news.163.com/war/) | [部落](http://bulo.163.com/)
[评论](http://talk.163.com/) | [NBA](http://sports.163.com/nba/) | [明星](http://ent.163.com/people/) | [证券](http://stock.163.com/) | [基金](http://fund.163.com/) | [探索](http://tech.163.com/discover/) | [房产](http://soufun.163.com/) | [手机](http://mobile.163.com/) | [两性](http://health.163.com/sex/) | [健康](http://health.163.com/) | [培训](http://px.163.com/) | [电影](http://ent.163.com/ent/level1/movie.html) | [游戏](http://game.163.com/)| [拍卖](http://adfarm.mediaplex.com/ad/ck/4080-25838-9511-9?cn=netease;2word;hp) | [论坛](http://bbs.163.com/)  [![网易学院·教程]()](http://tech.163.com/school/) ·[工具软件](http://tech.163.com/special/t/000915AD/tools.html)·[办公软件](http://tech.163.com/special/o/000915A6/officetool.html)·[操作系统](http://tech.163.com/special/O/000915A0/OS.html)·[图形图像](http://tech.163.com/special/p/0009158A/photos.html)·[网站建设](http://tech.163.com/special/w/0009158K/website.html)·[编程开发](http://tech.163.com/special/d/0009159F/developer.html)·[多媒体](http://tech.163.com/special/m/0009158R/multimedia.html)·[网络](http://tech.163.com/special/n/000917GE/net.html)·[病毒](http://tech.163.com/special/d/000917GF/du.html) ·[学院首页](http://tech.163.com/school)·[精选专题](http://tech.163.com/special/S/000915SN/S_Special.html)·[艺术设计](http://tech.163.com/special/A/00091593/Arts1.html)·[电子杂志](http://tech.163.com/special/E/00091ESS/Ebook.html)·[教授视点](http://tech.163.com/special/S/000915AH/S_InterView.html)·[教授名录](http://tech.163.com/special/A/000915AH/AllPro1.html)·[软件新闻](http://tech.163.com/special/s/000915AS/softnews.html)·[论坛](http://tech.163.com/special/s/000917D5/schoolbbs.html)

你现在的位置是： [网易](http://www.163.com/) > [网易科技](http://tech.163.com/) > [网易学院·教程](http://tech.163.com/school)
# Oracle数据库中分区表的操作方法

http://tech.163.com/school · 2005-06-16 11:44:19 · 来源: blog

第1页：Oracle数据库中分区表的操作方法 第2页：Oracle数据库中分区表的操作方法
**摘要**：在大量业务数据处理的项目中，可以考虑使用分区表来提高应用系统的性能并方便数据管理，本文详细介绍了分区表的使用。
在大型的企业应用或企业级的数据库应用中，要处理的数据量通常可以达到几十到几百GB，有的甚至可以到TB级。虽然存储介质和数据处理技术的发展也很快，但是仍然不能满足用户的需求，为了使用户的大量的数据在读写操作和查询中速度更快，Oracle提供了对表和索引进行分区的技术，以改善大型应用系统的性能。
使用分区的优点：
·增强可用性：如果表的某个分区出现故障，表在其他分区的数据仍然可用；
·维护方便：如果表的某个分区出现故障，需要修复数据，只修复该分区即可；
·均衡I/O：可以把不同的分区映射到磁盘以平衡I/O，改善整个系统性能；
·改善查询性能：对分区对象的查询可以仅搜索自己关心的分区，提高检索速度。
Oracle数据库提供对表或索引的分区方法有三种：
·范围分区
·Hash分区（散列分区）
·复合分区
下面将以实例的方式分别对这三种分区方法来说明分区表的使用。为了测试方便，我们先建三个表空间。

create tablespace dinya_space01    datafile ’/test/demo/oracle/demodata/dinya01.dnf’ size 50M    create tablespace dinya_space01    datafile ’/test/demo/oracle/demodata/dinya02.dnf’ size 50M    create tablespace dinya_space01    datafile ’/test/demo/oracle/demodata/dinya03.dnf’ size 50M
**1.1. 分区表的创建**
1.1.1. 范围分区
范围分区就是对数据表中的某个值的范围进行分区，根据某个值的范围，决定将该数据存储在哪个分区上。如根据序号分区，根据业务记录的创建日期进行分区等。
需求描述：有一个物料交易表，表名：material_transactions。该表将来可能有千万级的数据记录数。要求在建该表的时候使用分区表。这时候我们可以使用序号分区三个区，每个区中预计存储三千万的数据，也可以使用日期分区，如每五年的数据存储在一个分区上。
根据交易记录的序号分区建表：

SQL> create table dinya_test    2 (    3 transaction_id number primary key,    4 item_id number(8) not null,    5 item_description varchar2(300),    6 transaction_date date not null    7 )    8 partition by range (transaction_id)    9 (    10 partition part_01 values less than(30000000) tablespace dinya_space01,    11 partition part_02 values less than(60000000) tablespace dinya_space02,    12 partition part_03 values less than(maxvalue) tablespace dinya_space03    13 );    Table created.
建表成功，根据交易的序号，交易ID在三千万以下的记录将存储在第一个表空间dinya_space01中，分区名为:par_01，在三千万到六千万之间的记录存储在第二个表空间：
dinya_space02中，分区名为：par_02，而交易ID在六千万以上的记录存储在第三个表空间dinya_space03中，分区名为par_03.
根据交易日期分区建表：

SQL> create table dinya_test    2 (    3 transaction_id number primary key,    4 item_id number(8) not null,    5 item_description varchar2(300),    6 transaction_date date not null    7 )    8 partition by range (transaction_date)    9 (    10 partition part_01 values less than(to_date(’2006-01-01’,’yyyy-mm-dd’))    tablespace dinya_space01,    11 partition part_02 values less than(to_date(’2010-01-01’,’yyyy-mm-dd’))    tablespace dinya_space02,    12 partition part_03 values less than(maxvalue) tablespace dinya_space03    13 );    Table created.
这样我们就分别建了以交易序号和交易日期来分区的分区表。每次插入数据的时候，系统将根据指定的字段的值来自动将记录存储到制定的分区（表空间）中。
当然，我们还可以根据需求，使用两个字段的范围分布来分区，如partition by range ( transaction_id ,transaction_date), 分区条件中的值也做相应的改变，请读者自行测试。
1.1.2. Hash分区（散列分区）
散列分区为通过指定分区编号来均匀分布数据的一种分区类型，因为通过在I/O设备上进行散列分区，使得这些分区大小一致。如将物料交易表的数据根据交易ID散列地存放在指定的三个表空间中：

SQL> create table dinya_test    2 (    3 transaction_id number primary key,    4 item_id number(8) not null,    5 item_description varchar2(300),    6 transaction_date date    7 )    8 partition by hash(transaction_id)    9 (    10 partition part_01 tablespace dinya_space01,    11 partition part_02 tablespace dinya_space02,    12 partition part_03 tablespace dinya_space03    13 );    Table created.
建表成功，此时插入数据，系统将按transaction_id将记录散列地插入三个分区中，这里也就是三个不同的表空间中。
1.1.3. 复合分区
有时候我们需要根据范围分区后，每个分区内的数据再散列地分布在几个表空间中，这样我们就要使用复合分区。复合分区是先使用范围分区，然后在每个分区内再使用散列分区的一种分区方法，如将物料交易的记录按时间分区，然后每个分区中的数据分三个子分区，将数据散列地存储在三个指定的表空间中：

SQL> create table dinya_test    2 (    3 transaction_id number primary key,    4 item_id number(8) not null,    5 item_description varchar2(300),    6 transaction_date date    7 )    8 partition by range(transaction_date)subpartition by hash(transaction_id)    9 subpartitions 3 store in (dinya_space01,dinya_space02,dinya_space03)    10 (    11 partition part_01 values less than(to_date(’2006-01-01’,’yyyy-mm-dd’)),    12 partition part_02 values less than(to_date(’2010-01-01’,’yyyy-mm-dd’)),    13 partition part_03 values less than(maxvalue)    14 );    Table created.
该例中，先是根据交易日期进行范围分区，然后根据交易的ID将记录散列地存储在三个表空间中。
**1.2. 分区表操作**
以上了解了三种分区表的建表方法，下面将使用实际的数据并针对按日期的范围分区来测试分区表的数据记录的操作。
1.2.1. 插入记录：

SQL> insert into dinya_test values(1,12,’BOOKS’,sysdate);    1 row created.    SQL> insert into dinya_test values(2,12, ’BOOKS’,sysdate+30);    1 row created.    SQL> insert into dinya_test values(3,12, ’BOOKS’,to_date(’2006-05-30’,’yyyy-mm-dd’));    1 row created.    SQL> insert into dinya_test values(4,12, ’BOOKS’,to_date(’2007-06-23’,’yyyy-mm-dd’));    1 row created.    SQL> insert into dinya_test values(5,12, ’BOOKS’,to_date(’2011-02-26’,’yyyy-mm-dd’));    1 row created.    SQL> insert into dinya_test values(6,12, ’BOOKS’,to_date(’2011-04-30’,’yyyy-mm-dd’));    1 row created.    SQL> commit;    Commit complete.    SQL>
按上面的建表结果，2006年前的数据将存储在第一个分区part_01上，而2006年到2010年的交易数据将存储在第二个分区part_02上，2010年以后的记录存储在第三个分区part_03上。

![落叶秋客]() [[返回首页]](http://tech.163.com/)

[![]()](http://tech.163.com/05/0616/11/1MC8AUT900091589.html#) [1] [[2](http://tech.163.com/05/0616/11/1MC8AUT900091589_2.html)] [![]()](http://tech.163.com/05/0616/11/1MC8AUT900091589_2.html)
**相关文章：**

* ·[Oracle数据库集中复制方法浅议](http://tech.163.com/05/0610/11/1LSQ9ANG00091589.html)(2005-06-10 11:50:09)
* ·[Oracle中使用PL/SQL操作COM对象](http://tech.163.com/05/0608/11/1LNJOGMA00091589.html)(2005-06-08 11:19:55)
* ·[Oracle平台应用数据库系统的设计与开发](http://tech.163.com/05/0607/15/1LLF6ODF00091589.html)(2005-06-07 15:21:49)
* ·[Oracle与SQL Server在企业应用中的比较](http://tech.163.com/05/0606/10/1LIAGLN000091589.html)(2005-06-06 10:02:08)
* ·[SUN与Oracle牵手对抗SAP和IBM信息化巨头](http://tech.163.com/05/0420/08/1HP5LHI6000915DD.html)(2005-04-20 08:49:19)

**推荐文章：**

·[赢在2007赛迪网年度企业人物榜单揭晓](http://tech.163.com/08/0117/13/42DNAAL500091589.html) ·[你最需要哪种类型的视频教程](http://tech.163.com/08/0111/14/41UC892E00091589.html) ·[不用网银也网上购物 三步自助开通](http://tech.163.com/07/1206/14/3V1M3KJA00091589.html) ·[2007年UPA用户体验大会成功闭幕](http://tech.163.com/07/1204/09/3US0INJ500091589.html) ·[2007中国青年设计节暨用户体验年会在京开幕](http://tech.163.com/07/1124/10/3U2B680L00091589.html) ·[User Friendly 2007现场图片](http://tech.163.com/07/1123/14/3U07BF3000091589.html) ·[手机畅游互联网 空中Opera 2.0实测](http://tech.163.com/07/1120/15/3TOJAKSS00091589.html) ·[动易软件即将全面开源和免费](http://tech.163.com/07/1120/10/3TO3Q38200091589.html) ·[搜图有“道” 图片达人的搜索秘籍](http://tech.163.com/07/0830/17/3N5MP1KG000917GR.html) ·[数字水墙 08年世博会亮相](http://tech.163.com/07/0827/15/3MTMJAC60009159C.html) ·[RabbitAir MinusA2空气净化器设计](http://tech.163.com/07/0827/14/3MTLTCQM00091599.html) ·[Oscar Bjarnason 平面设计](http://tech.163.com/07/0827/14/3MTL6T860009159B.html) ·[国产杀毒软件半个月内勇夺两项国际权威认证](http://tech.163.com/07/0827/12/3MTDSFIV00091JFM.html) ·[美化你的博客-推荐多个博客图标下载网站](http://tech.163.com/07/0827/11/3MT9FRH900092A5O.html) ·[微软回应Vista用户遇到的网络问题“设计如此”](http://tech.163.com/07/0827/11/3MT8N9K6000920O4.html) ·[eBay改进用户体验 借鉴亚马逊页面设计搜索功能](http://tech.163.com/07/0827/10/3MT8ALLD000918BL.html) ·[极点五笔6.0正式版发布](http://tech.163.com/07/0827/10/3MT86E56000915AS.html) ·[WPS Office 2007抢先试用](http://tech.163.com/07/0827/10/3MT5KT0J000915AC.html) ·[报告称Google Apps功能远不及微软Office](http://tech.163.com/07/0827/10/3MT5A8I4000915AS.html) ·[什么是SOCK5代理，什么是HTTP代理](http://tech.163.com/07/0827/10/3MT55K55000917GE.html)
[]() 最新评论[]() [![]()](http://comment.news.163.com/reply/post.jsp?board=tech_bbs&threadid=1MC8AUT900091589)   ![]() **[更多评论](http://comment.news.163.com/reply/post.jsp?type=re&board=tech_bbs&threadid=1MC8AUT900091589)** 共 ***0***条评论 网易通行证：  　 密码：  　 　      参与评论   您的发表的评论将在5分钟内被审核，请耐心等待

网易学院联系电话：020-61210163-560 合作/投稿邮箱：NeteaseSchool(at)126.com

合作媒体：[结绳记事](http://www.isblog.cn/) [艺网](http://www.arthtml.com/) [中国电脑救援中心](http://www.pc120.net.cn/) [ad110.com](http://www.ad110.com/) [中国教程网](http://www.jcwcn.com/) [FIF多媒体制作组](http://fif.hlw.cn/) [金鹰电脑教程网](http://www.xjke.com/) [时代光魔](http://www.cybermagics.com/) [好好学习 天天向上](http://www.ttup.cn/)
[主编信箱](http://tech.163.com/special/d/00091M9L/draftad1.html)　热线:020-　[给网易提意见](http://bbs3.news.163.com/board/postlist.jsp?b=idea)　[About NetEase](http://corp.163.com/) - [公司简介](http://gb.corp.163.com/gb/about/overview.html) - [联系方法](http://gb.corp.163.com/gb/contactus.html) - [招聘信息](http://corp.163.com/gb/job/job.html) - [客户服务](http://gb.corp.163.com/gb/cs.html) - [相关法律](http://gb.corp.163.com/gb/legal.html) - [网络营销](http://emarketing.biz.163.com/) - [帮助中心](http://help.163.com/)
网易公司版权所有
©1997-2009
